
# C与x86-64位汇编(1) -编译,反汇编及 lldb 概览

视频链接：https://www.bilibili.com/video/av60512172?from=search&seid=8272921816629826148

### 如何查看C/C++源代码的汇编码

源代码
```
#include <stdio.h>

int main() {
	int b = 1;
	b = b + 1;
	return 0;
}
```

方法一
```
cc -o 1.o -c 1.c
objdump -d 1.o

结果：
1.o:	file format Mach-O 64-bit x86-64

Disassembly of section __TEXT,__text:
_main:
       0:	55 	pushq	%rbp
       1:	48 89 e5 	movq	%rsp, %rbp
       4:	31 c0 	xorl	%eax, %eax
       6:	c7 45 fc 00 00 00 00 	movl	$0, -4(%rbp)
       d:	c7 45 f8 01 00 00 00 	movl	$1, -8(%rbp)
      14:	8b 4d f8 	movl	-8(%rbp), %ecx
      17:	83 c1 01 	addl	$1, %ecx
      1a:	89 4d f8 	movl	%ecx, -8(%rbp)
      1d:	5d 	popq	%rbp
      1e:	c3 	retq
```

方法二
```
gcc -S 1.c -o 1.s
cat 1.s | grep -v '\.' | more

结果：
_main:                                  ## @main
        pushq   %rbp
        movq    %rsp, %rbp
        xorl    %eax, %eax
        movl    $0, -4(%rbp)
        movl    $1, -8(%rbp)
        movl    -8(%rbp), %ecx
        addl    $1, %ecx
        movl    %ecx, -8(%rbp)
        popq    %rbp
        retq
                                        ## -- End function
```
