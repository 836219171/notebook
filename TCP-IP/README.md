
# TCP/IP协议族

### 为什么要做TCP/IP总结，如何做

我是2018年7月加入七牛云公司的，来了七牛后，最直接接触到的问题即是上传、下载，云存储每天都有大量（说百亿级别不为过）的上传请求，从客户端上传数据（文件、图片、视频）到存储云服务器，需要依赖HTTP协议以及发送程序，有上传则有下载，同样的，CDN每天都在承受着数Tbps带宽的请求，也需要依赖HTTP。

众所周知，传输层是非常不稳定的（相比于物理层及应用层），经常会出现网络传输超时的情况，偶尔会有请求错误（状态码非200）的情况，有时是技术人员操作不当导致的，有时是服务端响应异常问题，而有时候（也是非常困难的一种情况）是运营商采取了一次不对外告知的限流策略导致的网络传输超时。在七牛云工作的时间里，基本上每天都至少遇到几例关于网路传输方面的问题，有时多则一天十几例，当然这也与我的工作性质有关系，我做的是技术支持岗位，面向客户帮助客户解决实际问题一类的工作，但我相信就算是研发、运维更偏后端的工作，实际遇到的网络问题也不会少（基本上提问题而来的都是其他公司的运维或研发）。

就这样的，在接触业务的过程中慢慢积累，我对HTTP协议的理解逐步提高了，从内部原理、实用工具、代码程序、问题案例等方面，记忆中都有一些内容了，那么，我觉得需要一次全面的总结，以帮助我对这一块知识有一个更全面、更细节的认识，也有助于接下来在展开其他方面工作时，关于TCP、HTTP这一块有笔记可翻，不随着时间流逝而忘却。

其实总结TCP/IP，这不是一个非常容易的事情，这已经可以归属于一门大学基础课程了：计算机网络。TCP/IP并非是一个单独的协议，它是一个协议族。我们不妨先来看一下维基百科对TCP/IP协议族的定义：

> 互联网协议套件（英语：Internet Protocol Suite，缩写IPS）是一个网络通信模型，以及一整个网络传输协议家族，为网际网络的基础通信架构。它常被通称为TCP/IP协议族（英语：TCP/IP Protocol Suite，或TCP/IP Protocols），简称TCP/IP。因为该协议家族的两个核心协议：TCP（传输控制协议）和IP（网际协议），为该家族中最早通过的标准[3]。由于在网络通讯协议普遍采用分层的结构，当多个层次的协议共同工作时，类似计算机科学中的堆栈，因此又被称为TCP/IP协议栈（英语：TCP/IP Protocol Stack）。

从定义来看，拆为了2个概念：TCP（传输控制协议）和IP（网际协议）。它们是当前互联网架构的核心协议。其中TCP协议属于传输层，IP协议属于网络层。TCP协议是非常多的应用层协议的基础，比如：

> HTTP（Hypertext Transfer Protocol，超文本传输协议），主要用于普通浏览。

> HTTPS（Hypertext Transfer Protocol over Secure Socket Layer, or HTTP over SSL，安全超文本传输协议），HTTP协议的安全版本。

> FTP（File Transfer Protocol，文件传输协议），由名知义，用于文件传输。

> POP3（Post Office Protocol, version 3，邮局协议），收邮件用。

> SMTP（Simple Mail Transfer Protocol，简单邮件传输协议），用来发送电子邮件。

> TELNET（Teletype over the Network，网络电传），通过一个终端（terminal）登陆到网络。

> SSH（Secure Shell，用于替代安全性差的TELNET），用于加密安全登陆用。

由此引出我本次总结的一个核心思想：**应用为主，理论为基础。**

应用为主。在实际工作中，把概念性的内容背下来，却不会使用轮子，是没有意义的，关键在于如何使用HTTP、遇到错误时如何正确排查解决。因此我想要重点总结一下一些轮子的使用经验，比如 强大的命令行工具curl、java发送http请求实用工具okhttp、几种抓取包以及分析包工具如tcpdump、wireshark等。既然是深入总结，就要要求高一点，比如功能全面，“使用okhttp发一次请求成功”就认为可以了，这肯定是不够的，还有许多实用功能，详细可以参考 [各语多功能言发送HTTP请求工具](05.各语言多功能发送HTTP请求工具)。

理论为基础，一些非常基础的理论是需要介绍的，比如三次握手及四次挥手。但我不只总结理论，而是在应用过程中插入理论知识，体现出它的价值。

目前已经拟好的标题如下

- 01.TCP三次握手及四次挥手
- 02.发送TCP上层请求的强大工具CURL
- 03.常见HTTP请求头响应头及作用
- 04.一次完整的HTTP请求介绍
- 05.各语言多功能发送HTTP请求工具
- 06.多种抓包工具详细介绍

一步步来，可能会有所修改，最终落稿子是两种形式：GitHub上的文章总结、B站的视频总结。
