
# 同步与异步、阻塞与非阻塞

### 同步与异步

同步： 同步就是发起一个调用后，被调用者未处理完请求之前，调用不返回。

异步： 异步就是发起一个调用后，立刻得到被调用者的回应表示已接收到请求，但是被调用者并没有返回结果，此时我们可以处理其他的请求，被调用者通常依靠事件，回调等机制来通知调用者其返回结果。

### 阻塞和非阻塞

阻塞： 阻塞就是发起一个请求，调用者一直等待请求结果返回，也就是当前线程会被挂起，无法从事其他任务，只有当条件就绪才能继续。

非阻塞： 非阻塞就是发起一个请求，调用者不用一直等着结果返回，可以先去干其他事情。

### 例子及辩证

A顾客去吃海底捞，就这样干坐着等了一小时，然后才开始吃火锅。(同步阻塞)

B顾客去吃海底捞，他一看要等挺久，于是去逛商场，每次逛一会就跑回来看有没有排到他。于是他最后既购了物，又吃上海底捞了。（同步非阻塞）

C顾客去吃海底捞，由于他是高级会员，所以店长说，你去商场随便玩吧，等下有位置，我立马打电话给你。于是C顾客不用干坐着等，也不用每过一会儿就跑回来看有没有等到，最后也吃上了海底捞（异步非阻塞）

***乍一看 同步与阻塞，异步与非阻塞 的概念很像，其实有所区别***

拿上面例子来看，同步、异步关注点是 顾客主动询问店长排队结果 or 店长主动通知顾客排队结果，阻塞、非阻塞关注点是 顾客是否可以去干其他事情，是否要一直等着排队。

阻塞实际上是操作系统中的概念，在 [专用系统-多道程序-分时系统的概念及习题](https://github.com/peteryuanpan/notebook/tree/master/BASE_PROBLEM/基础问题收集及自我总结/计算机基础/专用系统-多道程序-分时系统的概念及习题) 中有例子介绍。

阻塞/非阻塞 关注的是多个进程之间的关系，强调是否因为一个进程而卡住了其他进程，其他进程做不了了。

同步/异步 关注的是一个进程的返回结果方式，强调是同步获取结果，还是异步被通知结果。

关于的同步阻塞、同步非阻塞、异步非阻塞的概念区别，还需后面文章以BIO、NIO、AIO的代码例子说明。

### 有无异步阻塞？

继续拿海底捞的例子，异步阻塞相当于顾客一直在等待店长电话通知他排队结果，但没有去做别的事，这种情况我的理解是没意义的，对于异步来说，我会被事件或回调通知，那么我就没必要阻塞地等待了，可以非阻塞地干别的事情（当然，无事可干一直等待也不是不可以）。

然而 [Java核心（五）深入理解BIO、NIO、AIO](https://zhuanlan.zhihu.com/p/51453522) 中给出了一个异步阻塞的应用例子，如下：

> 这种方式在分布式数据库中经常用到，例如在往一个分布式数据库写一条记录，通常会有一份是同步阻塞的记录，而还有两至三份是备份记录会写到其他机器上，这些备份记录通常都是采用异步阻塞的方式写I/O。异步阻塞对网络I/O能够提升效率，尤其像上面这种同时多份数据相同的情况。

有待进一步探讨

### Reference

[Snailclimb/JavaGuide:BIO-NIO-AIO](https://github.com/Snailclimb/JavaGuide/blob/master/docs/java/BIO-NIO-AIO.md)

[如何理解BIO、NIO、AIO的区别？](https://juejin.im/post/5dbba5df6fb9a0204a08ae55)

[Java核心（五）深入理解BIO、NIO、AIO](https://zhuanlan.zhihu.com/p/51453522)
